<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kallakriti - Admin Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    background: #f5f5f5;
    color: #333;
}

/* Header */
.admin-header {
    background: linear-gradient(135deg, #1f2a44, #2f4670);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.admin-header h1 {
    font-size: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.admin-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.logout-btn {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.3s;
}

.logout-btn:hover {
    background: #c0392b;
}

/* Dashboard Container */
.dashboard-container {
    display: flex;
    min-height: calc(100vh - 80px);
}

/* Sidebar */
.sidebar {
    width: 250px;
    background: white;
    box-shadow: 2px 0 10px rgba(0,0,0,0.05);
    padding: 20px 0;
}

.sidebar-menu {
    list-style: none;
}

.sidebar-menu li {
    padding: 15px 25px;
    cursor: pointer;
    transition: background 0.3s;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
}

.sidebar-menu li:hover {
    background: #f8f4eb;
}

.sidebar-menu li.active {
    background: #9c7c38;
    color: white;
}

/* Main Content */
.main-content {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
}

.section {
    background: white;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    display: none;
}

.section.active {
    display: block;
}

.section h2 {
    color: #1f2a44;
    margin-bottom: 25px;
    padding-bottom: 10px;
    border-bottom: 2px solid #f0f0f0;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Stats Cards */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    text-align: center;
    transition: transform 0.3s;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-card i {
    font-size: 40px;
    margin-bottom: 15px;
}

.stat-card.products { border-top: 4px solid #3498db; }
.stat-card.products i { color: #3498db; }

.stat-card.complaints { border-top: 4px solid #e74c3c; }
.stat-card.complaints i { color: #e74c3c; }

.stat-card.materials { border-top: 4px solid #9b59b6; }
.stat-card.materials i { color: #9b59b6; }

.stat-card.custom { border-top: 4px solid #2ecc71; }
.stat-card.custom i { color: #2ecc71; }

.stat-number {
    font-size: 32px;
    font-weight: 600;
    margin: 10px 0;
}

.stat-label {
    color: #666;
    font-size: 14px;
}

/* Product Management */
.product-form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 30px;
    background: #f9f9f9;
    padding: 25px;
    border-radius: 10px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #333;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    font-family: 'Poppins', sans-serif;
    transition: border-color 0.3s;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #9c7c38;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-buttons {
    grid-column: 1 / -1;
    display: flex;
    gap: 15px;
}

.btn {
    padding: 12px 30px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    font-size: 14px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
}

.btn-primary {
    background: #9c7c38;
    color: white;
}

.btn-primary:hover {
    background: #7a612d;
}

.btn-secondary {
    background: #3498db;
    color: white;
}

.btn-secondary:hover {
    background: #2980b9;
}

.btn-danger {
    background: #e74c3c;
    color: white;
}

.btn-danger:hover {
    background: #c0392b;
}

.btn-success {
    background: #2ecc71;
    color: white;
}

.btn-success:hover {
    background: #27ae60;
}

/* Products Table */
.products-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.products-table th {
    background: #f8f4eb;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    color: #1f2a44;
    border-bottom: 2px solid #e0d6c2;
}

.products-table td {
    padding: 15px;
    border-bottom: 1px solid #eee;
}

.products-table tr:hover {
    background: #f9f9f9;
}

.product-image {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 6px;
}

.action-buttons {
    display: flex;
    gap: 10px;
}

.action-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
}

.edit-btn {
    background: #3498db;
    color: white;
}

.delete-btn {
    background: #e74c3c;
    color: white;
}

/* Complaints Table */
.complaints-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.complaints-table th {
    background: #f8f4eb;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    color: #1f2a44;
    border-bottom: 2px solid #e0d6c2;
}

.complaints-table td {
    padding: 15px;
    border-bottom: 1px solid #eee;
}

.status-badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
}

.status-pending {
    background: #fff3cd;
    color: #856404;
}

.status-resolved {
    background: #d4edda;
    color: #155724;
}

/* Image Upload */
.image-preview {
    width: 150px;
    height: 150px;
    border: 2px dashed #ddd;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    overflow: hidden;
}

.image-preview img {
    max-width: 100%;
    max-height: 100%;
    display: none;
}

.image-preview span {
    color: #999;
    font-size: 14px;
}

/* CROCHET SPECIFIC SECTIONS */
.materials-section, .design-ideas-section {
    background: #f9f9f9;
    padding: 25px;
    border-radius: 10px;
    margin-bottom: 25px;
}

.materials-list, .ideas-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.material-item, .idea-item {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.material-item h4, .idea-item h4 {
    color: #1f2a44;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.idea-item img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 10px;
}

/* Password Change Section */
.password-form {
    max-width: 500px;
    margin: 0 auto;
    background: #f9f9f9;
    padding: 25px;
    border-radius: 10px;
}

.password-form .form-group {
    margin-bottom: 20px;
}

.password-strength {
    height: 5px;
    background: #ddd;
    border-radius: 3px;
    margin-top: 5px;
    overflow: hidden;
}

.strength-bar {
    height: 100%;
    width: 0%;
    transition: width 0.3s, background 0.3s;
}

.strength-weak { background: #e74c3c; width: 33%; }
.strength-medium { background: #f39c12; width: 66%; }
.strength-strong { background: #2ecc71; width: 100%; }

.password-requirements {
    background: #fff3cd;
    padding: 15px;
    border-radius: 6px;
    margin-top: 20px;
    font-size: 13px;
}

.password-requirements ul {
    margin-left: 20px;
    margin-top: 10px;
}

/* Responsive */
@media (max-width: 1024px) {
    .dashboard-container {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        order: 2;
    }
    
    .sidebar-menu {
        display: flex;
        overflow-x: auto;
    }
    
    .sidebar-menu li {
        white-space: nowrap;
    }
}

@media (max-width: 768px) {
    .product-form {
        grid-template-columns: 1fr;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .admin-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .materials-list, .ideas-list {
        grid-template-columns: 1fr;
    }
}

/* Alert Messages */
.alert {
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.alert-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.alert-info {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

/* Quick Actions */
.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin: 30px 0;
}

.action-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: all 0.3s;
}

.action-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}

.action-card i {
    font-size: 30px;
    margin-bottom: 10px;
    color: #9c7c38;
}

/* Business Tools */
.business-tools {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.tool-card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.3s;
}

.tool-card:hover {
    transform: translateY(-5px);
}

.tool-card i {
    font-size: 40px;
    color: #9c7c38;
    margin-bottom: 15px;
}

.tool-card h3 {
    color: #1f2a44;
    margin-bottom: 10px;
}

.tool-card p {
    color: #666;
    font-size: 14px;
    margin-bottom: 20px;
}
</style>
</head>
<body>
    <!-- Header -->
    <div class="admin-header">
        <h1><i class="fas fa-crown"></i> Kallakriti Admin Dashboard</h1>
        <div class="admin-info">
            <span><i class="fas fa-user-circle"></i> Admin</span>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <ul class="sidebar-menu">
                <li class="active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </li>
                <li onclick="showSection('products')">
                    <i class="fas fa-box"></i> Product Management
                </li>
                <li onclick="showSection('addProduct')">
                    <i class="fas fa-plus-circle"></i> Add New Product
                </li>
                <li onclick="showSection('complaints')">
                    <i class="fas fa-exclamation-triangle"></i> Customer Complaints
                </li>
                <li onclick="showSection('materials')">
                    <i class="fas fa-spool"></i> Materials Stock
                </li>
                <li onclick="showSection('designs')">
                    <i class="fas fa-palette"></i> Design Ideas
                </li>
                <li onclick="showSection('password')">
                    <i class="fas fa-key"></i> Change Password
                </li>
                <li onclick="showSection('settings')">
                    <i class="fas fa-cog"></i> Settings
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="section active">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h2>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card products">
                        <i class="fas fa-box"></i>
                        <div class="stat-number" id="totalProducts">0</div>
                        <div class="stat-label">Active Products</div>
                    </div>
                    
                    <div class="stat-card complaints">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="stat-number" id="totalComplaints">0</div>
                        <div class="stat-label">Pending Complaints</div>
                    </div>
                    
                    <div class="stat-card materials">
                        <i class="fas fa-spool"></i>
                        <div class="stat-number" id="materialStock">12</div>
                        <div class="stat-label">Yarn Colors</div>
                    </div>
                    
                    <div class="stat-card custom">
                        <i class="fas fa-star"></i>
                        <div class="stat-number" id="customOrders">5</div>
                        <div class="stat-label">Custom Orders</div>
                    </div>
                </div>

                <!-- Business Tools -->
                <h3><i class="fas fa-tools"></i> Business Tools</h3>
                <div class="business-tools">
                    <div class="tool-card">
                        <i class="fas fa-calculator"></i>
                        <h3>Pricing Calculator</h3>
                        <p>Calculate product pricing based on material cost and time</p>
                        <button class="btn btn-primary" onclick="openPricingCalculator()">
                            <i class="fas fa-calculator"></i> Open Calculator
                        </button>
                    </div>
                    
                    <div class="tool-card">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>Order Timeline</h3>
                        <p>Track custom order deadlines and delivery dates</p>
                        <button class="btn btn-primary" onclick="viewOrderTimeline()">
                            <i class="fas fa-calendar"></i> View Timeline
                        </button>
                    </div>
                    
                    <div class="tool-card">
                        <i class="fas fa-chart-line"></i>
                        <h3>Sales Analytics</h3>
                        <p>View product popularity and sales trends</p>
                        <button class="btn btn-primary" onclick="viewSalesAnalytics()">
                            <i class="fas fa-chart-bar"></i> View Analytics
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                <div class="quick-actions">
                    <div class="action-card" onclick="showSection('addProduct')">
                        <i class="fas fa-plus"></i>
                        <div>Add Product</div>
                    </div>
                    <div class="action-card" onclick="showSection('materials')">
                        <i class="fas fa-spool"></i>
                        <div>Check Stock</div>
                    </div>
                    <div class="action-card" onclick="showSection('complaints')">
                        <i class="fas fa-comments"></i>
                        <div>View Complaints</div>
                    </div>
                    <div class="action-card" onclick="backupData()">
                        <i class="fas fa-save"></i>
                        <div>Backup Data</div>
                    </div>
                </div>
            </div>

            <!-- Product Management Section -->
            <div id="products" class="section">
                <h2><i class="fas fa-box"></i> Product Management</h2>
                <p>Edit or delete existing products. Click "Edit" to modify product details.</p>
                
                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Add Product Section -->
            <div id="addProduct" class="section">
                <h2><i class="fas fa-plus-circle"></i> Add New Product</h2>
                
                <form id="addProductForm" class="product-form" onsubmit="addNewProduct(event)">
                    <div class="form-group">
                        <label for="productName">Product Name *</label>
                        <input type="text" id="productName" required placeholder="e.g., Crochet Rose Bouquet">
                    </div>
                    
                    <div class="form-group">
                        <label for="productPrice">Price (â‚¹) *</label>
                        <input type="number" id="productPrice" required placeholder="e.g., 299" min="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="productCategory">Category *</label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                            <option value="flowers">Crochet Flowers</option>
                            <option value="toys">Crochet Toys</option>
                            <option value="accessories">Accessories</option>
                            <option value="baby">Baby Items</option>
                            <option value="custom">Custom Orders</option>
                            <option value="money">Money Bouquets</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="productImageUrl">Image URL</label>
                        <input type="url" id="productImageUrl" placeholder="https://example.com/image.jpg">
                    </div>
                    
                    <div class="form-group full-width">
                        <label>Image Preview</label>
                        <div class="image-preview" id="imagePreview">
                            <span>Preview will appear here</span>
                            <img id="previewImage" src="" alt="Preview">
                        </div>
                        <small>You can use free image hosting services like ImgBB or Unsplash for images</small>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Add Product
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="clearForm()">
                            <i class="fas fa-redo"></i> Clear Form
                        </button>
                    </div>
                </form>
            </div>

            <!-- Complaints Section -->
            <div id="complaints" class="section">
                <h2><i class="fas fa-exclamation-triangle"></i> Customer Complaints</h2>
                
                <div class="complaints-table-container">
                    <table class="complaints-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="complaintsTableBody">
                            <!-- Complaints will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Materials Stock Section -->
            <div id="materials" class="section">
                <h2><i class="fas fa-spool"></i> Materials Stock Management</h2>
                <p>Track your yarn and material inventory for crochet projects.</p>
                
                <div class="materials-section">
                    <h3><i class="fas fa-list"></i> Current Stock</h3>
                    <div class="materials-list" id="materialsList">
                        <!-- Materials will be loaded here -->
                    </div>
                    
                    <div class="form-buttons" style="margin-top: 20px;">
                        <button class="btn btn-success" onclick="addNewMaterial()">
                            <i class="fas fa-plus"></i> Add New Material
                        </button>
                        <button class="btn btn-secondary" onclick="updateStockLevels()">
                            <i class="fas fa-sync"></i> Update Stock
                        </button>
                    </div>
                </div>
            </div>

            <!-- Design Ideas Section -->
            <div id="designs" class="section">
                <h2><i class="fas fa-palette"></i> Design Ideas & Inspiration</h2>
                <p>Save and organize your crochet design ideas and patterns.</p>
                
                <div class="design-ideas-section">
                    <h3><i class="fas fa-lightbulb"></i> Design Collection</h3>
                    <div class="ideas-list" id="ideasList">
                        <!-- Design ideas will be loaded here -->
                    </div>
                    
                    <div class="form-buttons" style="margin-top: 20px;">
                        <button class="btn btn-success" onclick="addNewDesign()">
                            <i class="fas fa-plus"></i> Add New Design Idea
                        </button>
                        <button class="btn btn-secondary" onclick="importDesigns()">
                            <i class="fas fa-download"></i> Import Patterns
                        </button>
                    </div>
                </div>
            </div>

            <!-- Change Password Section -->
            <div id="password" class="section">
                <h2><i class="fas fa-key"></i> Change Admin Password</h2>
                <p>Update your admin login password for security.</p>
                
                <div class="password-form">
                    <form id="changePasswordForm" onsubmit="changeAdminPassword(event)">
                        <div class="form-group">
                            <label for="currentPassword">Current Password *</label>
                            <input type="password" id="currentPassword" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password *</label>
                            <input type="password" id="newPassword" required oninput="checkPasswordStrength()">
                            <div class="password-strength">
                                <div class="strength-bar" id="passwordStrength"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password *</label>
                            <input type="password" id="confirmPassword" required>
                        </div>
                        
                        <div class="password-requirements">
                            <strong>Password Requirements:</strong>
                            <ul>
                                <li>At least 8 characters long</li>
                                <li>Contains uppercase and lowercase letters</li>
                                <li>Includes at least one number</li>
                                <li>Includes at least one special character</li>
                            </ul>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-key"></i> Change Password
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="clearPasswordForm()">
                                <i class="fas fa-redo"></i> Clear
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="section">
                <h2><i class="fas fa-cog"></i> Business Settings</h2>
                
                <div class="product-form">
                    <div class="form-group">
                        <label for="whatsappNumber">WhatsApp Number *</label>
                        <input type="tel" id="whatsappNumber" value="7002341920" required>
                        <small>When you change this, customer website will update automatically</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="adminEmail">Business Email *</label>
                        <input type="email" id="adminEmail" value="kallakriti.craft@gmail.com" required>
                        <small>This email will show on customer website footer</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="businessHours">Business Hours</label>
                        <input type="text" id="businessHours" value="10:00 AM - 7:00 PM">
                    </div>
                    
                    <div class="form-group">
                        <label for="deliveryTime">Delivery Time Estimate</label>
                        <input type="text" id="deliveryTime" value="3-7 days for ready items">
                    </div>
                    
                    <div class="form-buttons">
                        <button class="btn btn-primary" onclick="saveSettings()">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                        <button class="btn btn-secondary" onclick="resetSettings()">
                            <i class="fas fa-redo"></i> Reset to Default
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Check if admin is logged in
    if (localStorage.getItem('adminLoggedIn') !== 'true') {
        window.location.href = "admin-login.html";
    }
    
    // Check session timeout (8 hours)
    const loginTime = localStorage.getItem('loginTime');
    const currentTime = Date.now();
    const eightHours = 8 * 60 * 60 * 1000;
    
    if (currentTime - loginTime > eightHours) {
        logout();
    }

    // ============= ADMIN PASSWORD MANAGEMENT =============
    const DEFAULT_ADMIN_PASSWORD = "kallakriti@123"; // Default password
    
    // Get current admin password (or use default)
    function getCurrentAdminPassword() {
        return localStorage.getItem('adminPassword') || DEFAULT_ADMIN_PASSWORD;
    }
    
    // Set new admin password
    function setAdminPassword(newPassword) {
        localStorage.setItem('adminPassword', newPassword);
    }
    // ============= PASSWORD MANAGEMENT ENDS =============

    // Product data structure (REMOVED description field)
    let products = JSON.parse(localStorage.getItem('kallakritiProducts') || '[]');
    let complaints = JSON.parse(localStorage.getItem('kallakritiComplaints') || '[]');
    
    // Materials data
    let materials = JSON.parse(localStorage.getItem('kallakritiMaterials') || '[]');
    
    // Design ideas data
    let designIdeas = JSON.parse(localStorage.getItem('kallakritiDesigns') || '[]');

    // Initialize default materials if empty
    if (materials.length === 0) {
        materials = [
            {name: "Cotton Yarn - White", color: "#FFFFFF", stock: "High", type: "Yarn"},
            {name: "Acrylic Yarn - Red", color: "#FF0000", stock: "Medium", type: "Yarn"},
            {name: "Wool Blend - Beige", color: "#F5F5DC", stock: "Low", type: "Yarn"},
            {name: "Metallic Thread", color: "#FFD700", stock: "Medium", type: "Thread"},
            {name: "Safety Eyes", color: "#000000", stock: "High", type: "Accessory"},
            {name: "Polyfill Stuffing", color: "#FFFFFF", stock: "High", type: "Material"}
        ];
        localStorage.setItem('kallakritiMaterials', JSON.stringify(materials));
    }

    // Initialize default design ideas if empty
    if (designIdeas.length === 0) {
        designIdeas = [
            {name: "Floral Wall Hanging", category: "Home Decor", image: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop"},
            {name: "Animal Amigurumi Set", category: "Toys", image: "https://images.unsplash.com/photo-1594787318287-7c5cee6dce76?w=300&h=200&fit=crop"},
            {name: "Baby Blanket Pattern", category: "Baby", image: "https://images.unsplash.com/photo-1584359983106-ef9366a6d5de?w=300&h=200&fit=crop"},
            {name: "Festive Garland", category: "Seasonal", image: "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=300&h=200&fit=crop"}
        ];
        localStorage.setItem('kallakritiDesigns', JSON.stringify(designIdeas));
    }

    // Update dashboard stats
    function updateDashboardStats() {
        document.getElementById('totalProducts').textContent = products.length;
        document.getElementById('totalComplaints').textContent = complaints.length;
        document.getElementById('materialStock').textContent = materials.length;
        
        // Calculate custom orders (products in custom category)
        const customOrders = products.filter(p => p.cat === 'custom').length;
        document.getElementById('customOrders').textContent = customOrders;
    }

    // Show section
    function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });
        
        // Remove active class from all menu items
        document.querySelectorAll('.sidebar-menu li').forEach(item => {
            item.classList.remove('active');
        });
        
        // Show selected section
        document.getElementById(sectionId).classList.add('active');
        
        // Add active class to clicked menu item
        const menuItems = document.querySelectorAll('.sidebar-menu li');
        menuItems.forEach((item, index) => {
            const sections = ['dashboard', 'products', 'addProduct', 'complaints', 'materials', 'designs', 'password', 'settings'];
            if (sections[index] === sectionId) {
                item.classList.add('active');
            }
        });
        
        // Load data for the section
        if (sectionId === 'products') {
            loadProductsTable();
        } else if (sectionId === 'complaints') {
            loadComplaintsTable();
        } else if (sectionId === 'materials') {
            loadMaterialsList();
        } else if (sectionId === 'designs') {
            loadDesignIdeas();
        } else if (sectionId === 'settings') {
            loadSettingsForm();
        } else if (sectionId === 'password') {
            clearPasswordForm();
        }
        
        updateDashboardStats();
    }

    // Load products table
    function loadProductsTable() {
        const tableBody = document.getElementById('productsTableBody');
        tableBody.innerHTML = '';
        
        products.forEach((product, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><img src="${product.img}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/60x60/ffffff/9c7c38?text=Product'"></td>
                <td>${product.name}</td>
                <td>${getCategoryName(product.cat)}</td>
                <td>â‚¹${product.price}</td>
                <td>
                    <div class="action-buttons">
                        <button class="action-btn edit-btn" onclick="editProduct(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteProduct(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Get category name
    function getCategoryName(categoryCode) {
        const categories = {
            'flowers': 'Crochet Flowers',
            'toys': 'Crochet Toys',
            'accessories': 'Accessories',
            'baby': 'Baby Items',
            'custom': 'Custom Orders',
            'money': 'Money Bouquets'
        };
        return categories[categoryCode] || categoryCode;
    }

    // Load complaints table
    function loadComplaintsTable() {
        const tableBody = document.getElementById('complaintsTableBody');
        tableBody.innerHTML = '';
        
        complaints.forEach((complaint, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${complaint.id}</td>
                <td>${complaint.name}</td>
                <td>${complaint.phone}</td>
                <td>${complaint.type}</td>
                <td>${complaint.date}</td>
                <td>
                    <span class="status-badge status-pending">Pending</span>
                </td>
                <td>
                    <button class="action-btn edit-btn" onclick="viewComplaint(${index})">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="action-btn delete-btn" onclick="deleteComplaint(${index})">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Load materials list
    function loadMaterialsList() {
        const materialsList = document.getElementById('materialsList');
        materialsList.innerHTML = '';
        
        materials.forEach((material, index) => {
            const materialItem = document.createElement('div');
            materialItem.className = 'material-item';
            materialItem.innerHTML = `
                <h4><i class="fas fa-spool" style="color: ${material.color}"></i> ${material.name}</h4>
                <p><strong>Type:</strong> ${material.type}</p>
                <p><strong>Stock Level:</strong> 
                    <span style="color: ${material.stock === 'High' ? '#2ecc71' : material.stock === 'Medium' ? '#f39c12' : '#e74c3c'}">
                        ${material.stock}
                    </span>
                </p>
            `;
            materialsList.appendChild(materialItem);
        });
    }

    // Load design ideas
    function loadDesignIdeas() {
        const ideasList = document.getElementById('ideasList');
        ideasList.innerHTML = '';
        
        designIdeas.forEach((idea, index) => {
            const ideaItem = document.createElement('div');
            ideaItem.className = 'idea-item';
            ideaItem.innerHTML = `
                <img src="${idea.image}" alt="${idea.name}" onerror="this.src='https://via.placeholder.com/300x200/ffffff/9c7c38?text=Design'">
                <h4><i class="fas fa-lightbulb"></i> ${idea.name}</h4>
                <p><strong>Category:</strong> ${idea.category}</p>
            `;
            ideasList.appendChild(ideaItem);
        });
    }

    // Load settings form
    function loadSettingsForm() {
        const settings = JSON.parse(localStorage.getItem('kallakritiSettings') || '{}');
        document.getElementById('whatsappNumber').value = settings.whatsappNumber || "7002341920";
        document.getElementById('adminEmail').value = settings.adminEmail || "kallakriti.craft@gmail.com";
        document.getElementById('businessHours').value = settings.businessHours || "10:00 AM - 7:00 PM";
        document.getElementById('deliveryTime').value = settings.deliveryTime || "3-7 days for ready items";
    }

    // ============= PASSWORD CHANGE FUNCTIONS =============
    function checkPasswordStrength() {
        const password = document.getElementById('newPassword').value;
        const strengthBar = document.getElementById('passwordStrength');
        
        let strength = 0;
        
        // Check password length
        if (password.length >= 8) strength += 1;
        
        // Check for uppercase letters
        if (/[A-Z]/.test(password)) strength += 1;
        
        // Check for lowercase letters
        if (/[a-z]/.test(password)) strength += 1;
        
        // Check for numbers
        if (/[0-9]/.test(password)) strength += 1;
        
        // Check for special characters
        if (/[^A-Za-z0-9]/.test(password)) strength += 1;
        
        // Update strength bar
        strengthBar.className = 'strength-bar';
        if (strength <= 2) {
            strengthBar.classList.add('strength-weak');
        } else if (strength <= 4) {
            strengthBar.classList.add('strength-medium');
        } else {
            strengthBar.classList.add('strength-strong');
        }
    }

    function changeAdminPassword(event) {
        event.preventDefault();
        
        const currentPassword = document.getElementById('currentPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        // Get stored password
        const storedPassword = getCurrentAdminPassword();
        
        // Check if current password is correct
        if (currentPassword !== storedPassword) {
            alert('âŒ Current password is incorrect!');
            return;
        }
        
        // Check if new password meets requirements
        if (newPassword.length < 8) {
            alert('âŒ Password must be at least 8 characters long!');
            return;
        }
        
        if (!/[A-Z]/.test(newPassword) || !/[a-z]/.test(newPassword)) {
            alert('âŒ Password must contain both uppercase and lowercase letters!');
            return;
        }
        
        if (!/[0-9]/.test(newPassword)) {
            alert('âŒ Password must contain at least one number!');
            return;
        }
        
        if (!/[^A-Za-z0-9]/.test(newPassword)) {
            alert('âŒ Password must contain at least one special character!');
            return;
        }
        
        // Check if passwords match
        if (newPassword !== confirmPassword) {
            alert('âŒ New passwords do not match!');
            return;
        }
        
        // Update password
        setAdminPassword(newPassword);
        
        alert('âœ… Password changed successfully!');
        clearPasswordForm();
        
        // Update admin-login.html file's default password
        updateLoginFilePassword(newPassword);
    }

    function clearPasswordForm() {
        document.getElementById('changePasswordForm').reset();
        document.getElementById('passwordStrength').className = 'strength-bar';
        document.getElementById('passwordStrength').style.width = '0%';
    }

    function updateLoginFilePassword(newPassword) {
        // Note: This would need server-side code to actually update the HTML file
        // For now, we'll just store it in localStorage
        console.log('New password set. You should also update the default password in admin-login.html file manually.');
    }
    // ============= PASSWORD CHANGE ENDS =============

    // Add new material
    function addNewMaterial() {
        const materialName = prompt('Enter material name:');
        if (!materialName) return;
        
        const materialColor = prompt('Enter material color (hex code or name):', '#FFFFFF');
        const materialType = prompt('Enter material type (Yarn, Thread, Accessory, etc.):', 'Yarn');
        const stockLevel = prompt('Enter stock level (High/Medium/Low):', 'Medium');
        
        const newMaterial = {
            name: materialName,
            color: materialColor,
            type: materialType,
            stock: stockLevel
        };
        
        materials.push(newMaterial);
        localStorage.setItem('kallakritiMaterials', JSON.stringify(materials));
        loadMaterialsList();
        updateDashboardStats();
        
        alert('âœ… Material added successfully!');
    }

    // Update stock levels
    function updateStockLevels() {
        const materialName = prompt('Enter material name to update stock:');
        if (!materialName) return;
        
        const materialIndex = materials.findIndex(m => m.name.toLowerCase().includes(materialName.toLowerCase()));
        
        if (materialIndex === -1) {
            alert('âŒ Material not found!');
            return;
        }
        
        const newStock = prompt('Enter new stock level (High/Medium/Low):', materials[materialIndex].stock);
        if (newStock) {
            materials[materialIndex].stock = newStock;
            localStorage.setItem('kallakritiMaterials', JSON.stringify(materials));
            loadMaterialsList();
            alert('âœ… Stock level updated!');
        }
    }

    // Add new design idea
    function addNewDesign() {
        const designName = prompt('Enter design idea name:');
        if (!designName) return;
        
        const designCategory = prompt('Enter design category:', 'Home Decor');
        const designImage = prompt('Enter image URL (optional):', '');
        
        const newDesign = {
            name: designName,
            category: designCategory,
            image: designImage || 'https://via.placeholder.com/300x200/ffffff/9c7c38?text=Design'
        };
        
        designIdeas.push(newDesign);
        localStorage.setItem('kallakritiDesigns', JSON.stringify(designIdeas));
        loadDesignIdeas();
        
        alert('âœ… Design idea added successfully!');
    }

    // Import designs
    function importDesigns() {
        alert('ðŸ’¡ Feature: This would connect to Pinterest or Instagram API to import crochet design ideas.\n\nFor now, you can add designs manually using "Add New Design Idea" button.');
    }

    // Business tools functions
    function openPricingCalculator() {
        const materialCost = prompt('Enter material cost (â‚¹):', '100');
        const timeHours = prompt('Enter time required (hours):', '2');
        const profitMargin = prompt('Enter profit margin percentage:', '50');
        
        if (materialCost && timeHours && profitMargin) {
            const laborCost = timeHours * 100; // â‚¹100 per hour
            const totalCost = parseFloat(materialCost) + laborCost;
            const sellingPrice = totalCost * (1 + (parseFloat(profitMargin) / 100));
            
            alert(`ðŸ’° Pricing Calculation:\n
Material Cost: â‚¹${materialCost}
Labor Cost (${timeHours} hrs): â‚¹${laborCost}
Total Cost: â‚¹${totalCost.toFixed(2)}
Profit Margin: ${profitMargin}%
Recommended Selling Price: â‚¹${sellingPrice.toFixed(2)}`);
        }
    }

    function viewOrderTimeline() {
        const customOrders = products.filter(p => p.cat === 'custom');
        
        if (customOrders.length === 0) {
            alert('ðŸ“… No custom orders found.');
            return;
        }
        
        let timeline = 'ðŸ“… Custom Order Timeline:\n\n';
        customOrders.forEach((order, index) => {
            timeline += `${index + 1}. ${order.name}\n`;
            timeline += `   Price: â‚¹${order.price}\n`;
            timeline += `   Status: In Progress\n`;
            timeline += `   Deadline: ${new Date(Date.now() + (index + 1) * 7 * 24 * 60 * 60 * 1000).toLocaleDateString()}\n\n`;
        });
        
        alert(timeline);
    }

    function viewSalesAnalytics() {
        const categoryCount = {};
        products.forEach(product => {
            categoryCount[product.cat] = (categoryCount[product.cat] || 0) + 1;
        });
        
        let analytics = 'ðŸ“Š Sales Analytics:\n\n';
        analytics += `Total Products: ${products.length}\n`;
        analytics += `Categories Distribution:\n`;
        
        for (const [category, count] of Object.entries(categoryCount)) {
            const percentage = ((count / products.length) * 100).toFixed(1);
            analytics += `â€¢ ${getCategoryName(category)}: ${count} products (${percentage}%)\n`;
        }
        
        // Find most expensive product
        const mostExpensive = products.reduce((max, product) => 
            product.price > max.price ? product : max, products[0] || {name: 'None', price: 0});
        
        analytics += `\nMost Expensive Product: ${mostExpensive.name} (â‚¹${mostExpensive.price})`;
        
        alert(analytics);
    }

    function backupData() {
        const backup = {
            products: products,
            complaints: complaints,
            materials: materials,
            designIdeas: designIdeas,
            settings: JSON.parse(localStorage.getItem('kallakritiSettings') || '{}'),
            backupDate: new Date().toISOString()
        };
        
        localStorage.setItem('kallakritiBackup', JSON.stringify(backup));
        alert('âœ… Data backed up successfully!\n\nBackup saved in browser storage.');
    }

    // Add new product (REMOVED description field)
    function addNewProduct(event) {
        event.preventDefault();
        
        const newProduct = {
            name: document.getElementById('productName').value,
            price: parseInt(document.getElementById('productPrice').value),
            cat: document.getElementById('productCategory').value,
            img: document.getElementById('productImageUrl').value || 'https://via.placeholder.com/300x300/ffffff/9c7c38?text=Kallakriti+Product'
        };
        
        products.push(newProduct);
        localStorage.setItem('kallakritiProducts', JSON.stringify(products));
        
        // Show success message
        alert('Product added successfully!');
        
        // Clear form
        clearForm();
        
        // Update customer website
        updateCustomerWebsite();
        
        // Update dashboard
        updateDashboardStats();
        
        // Reload products table
        loadProductsTable();
    }

    // Edit product (REMOVED description field)
    function editProduct(index) {
        const product = products[index];
        
        // Fill form with product data
        document.getElementById('productName').value = product.name;
        document.getElementById('productPrice').value = product.price;
        document.getElementById('productCategory').value = product.cat;
        document.getElementById('productImageUrl').value = product.img;
        updateImagePreview();
        
        // Change form to edit mode
        const form = document.getElementById('addProductForm');
        form.onsubmit = function(e) {
            e.preventDefault();
            saveProductEdit(index);
        };
        
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.innerHTML = '<i class="fas fa-save"></i> Update Product';
        
        // Show edit section
        showSection('addProduct');
    }

    // Save product edit (REMOVED description field)
    function saveProductEdit(index) {
        products[index] = {
            name: document.getElementById('productName').value,
            price: parseInt(document.getElementById('productPrice').value),
            cat: document.getElementById('productCategory').value,
            img: document.getElementById('productImageUrl').value || 'https://via.placeholder.com/300x300/ffffff/9c7c38?text=Kallakriti+Product'
        };
        
        localStorage.setItem('kallakritiProducts', JSON.stringify(products));
        
        alert('Product updated successfully!');
        clearForm();
        showSection('products');
        loadProductsTable();
        
        // Update customer website
        updateCustomerWebsite();
    }

    // Delete product
    function deleteProduct(index) {
        if (confirm('Are you sure you want to delete this product?')) {
            products.splice(index, 1);
            localStorage.setItem('kallakritiProducts', JSON.stringify(products));
            loadProductsTable();
            updateDashboardStats();
            
            // Update customer website
            updateCustomerWebsite();
        }
    }

    // View complaint details
    function viewComplaint(index) {
        const complaint = complaints[index];
        const details = `
            Complaint ID: ${complaint.id}
            Name: ${complaint.name}
            Email: ${complaint.email}
            Phone: ${complaint.phone}
            Type: ${complaint.type}
            Date: ${complaint.date}
            
            Details:
            ${complaint.details}
        `;
        alert(details);
    }

    // Delete complaint
    function deleteComplaint(index) {
        if (confirm('Are you sure you want to delete this complaint?')) {
            complaints.splice(index, 1);
            localStorage.setItem('kallakritiComplaints', JSON.stringify(complaints));
            loadComplaintsTable();
            updateDashboardStats();
        }
    }

    // Clear form
    function clearForm() {
        document.getElementById('addProductForm').reset();
        document.getElementById('previewImage').style.display = 'none';
        document.querySelector('#imagePreview span').style.display = 'block';
        
        // Reset form to add mode
        const form = document.getElementById('addProductForm');
        form.onsubmit = function(e) {
            e.preventDefault();
            addNewProduct(e);
        };
        
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.innerHTML = '<i class="fas fa-save"></i> Add Product';
    }

    // Update image preview
    document.getElementById('productImageUrl').addEventListener('input', updateImagePreview);
    
    function updateImagePreview() {
        const url = document.getElementById('productImageUrl').value;
        const preview = document.getElementById('previewImage');
        const placeholder = document.querySelector('#imagePreview span');
        
        if (url) {
            preview.src = url;
            preview.style.display = 'block';
            placeholder.style.display = 'none';
        } else {
            preview.style.display = 'none';
            placeholder.style.display = 'block';
        }
    }

    // Update customer website
    function updateCustomerWebsite() {
        // Save products to localStorage (customer website reads from here)
        localStorage.setItem('kallakritiProducts', JSON.stringify(products));
        
        console.log('âœ… Customer website updated with new products!');
        alert('âœ… Changes saved! Customer website has been updated.');
    }

    // Save settings (NOW CONNECTED TO CUSTOMER WEBSITE)
    function saveSettings() {
        const whatsappNumber = document.getElementById('whatsappNumber').value;
        const adminEmail = document.getElementById('adminEmail').value;
        const businessHours = document.getElementById('businessHours').value;
        const deliveryTime = document.getElementById('deliveryTime').value;
        
        if (!whatsappNumber || !adminEmail) {
            alert('âŒ WhatsApp Number and Email are required!');
            return;
        }
        
        // Save settings to localStorage
        const settings = {
            whatsappNumber: whatsappNumber,
            adminEmail: adminEmail,
            businessHours: businessHours,
            deliveryTime: deliveryTime,
            lastUpdated: new Date().toISOString()
        };
        localStorage.setItem('kallakritiSettings', JSON.stringify(settings));
        
        alert('âœ… Settings saved successfully!\n\nCustomer website will update automatically.');
    }

    // Reset settings to default
    function resetSettings() {
        if (confirm('Reset to default settings?')) {
            const defaultSettings = {
                whatsappNumber: "7002341920",
                adminEmail: "kallakriti.craft@gmail.com",
                businessHours: "10:00 AM - 7:00 PM",
                deliveryTime: "3-7 days for ready items"
            };
            localStorage.setItem('kallakritiSettings', JSON.stringify(defaultSettings));
            loadSettingsForm();
            alert('âœ… Settings reset to default!');
        }
    }

    // Logout
    function logout() {
        localStorage.removeItem('adminLoggedIn');
        localStorage.removeItem('loginTime');
        window.location.href = "admin-login.html";
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', function() {
        updateDashboardStats();
        loadProductsTable();
        loadComplaintsTable();
        loadMaterialsList();
        loadDesignIdeas();
        loadSettingsForm();
        
        // Auto logout after 8 hours
        setInterval(() => {
            const loginTime = localStorage.getItem('loginTime');
            const currentTime = Date.now();
            if (currentTime - loginTime > eightHours) {
                logout();
            }
        }, 60000); // Check every minute
    });
    </script>
</body>
</html>
