<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kallakriti - Admin Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    background: #f5f5f5;
    color: #333;
}

/* Header */
.admin-header {
    background: linear-gradient(135deg, #1f2a44, #2f4670);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.admin-header h1 {
    font-size: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.admin-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.logout-btn {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.3s;
}

.logout-btn:hover {
    background: #c0392b;
}

/* Dashboard Container */
.dashboard-container {
    display: flex;
    min-height: calc(100vh - 80px);
}

/* Sidebar */
.sidebar {
    width: 250px;
    background: white;
    box-shadow: 2px 0 10px rgba(0,0,0,0.05);
    padding: 20px 0;
}

.sidebar-menu {
    list-style: none;
}

.sidebar-menu li {
    padding: 15px 25px;
    cursor: pointer;
    transition: background 0.3s;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
}

.sidebar-menu li:hover {
    background: #f8f4eb;
}

.sidebar-menu li.active {
    background: #9c7c38;
    color: white;
}

/* Main Content */
.main-content {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
}

.section {
    background: white;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    display: none;
}

.section.active {
    display: block;
}

.section h2 {
    color: #1f2a44;
    margin-bottom: 25px;
    padding-bottom: 10px;
    border-bottom: 2px solid #f0f0f0;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Stats Cards */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    text-align: center;
    transition: transform 0.3s;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-card i {
    font-size: 40px;
    margin-bottom: 15px;
}

.stat-card.products { border-top: 4px solid #3498db; }
.stat-card.products i { color: #3498db; }

.stat-card.complaints { border-top: 4px solid #e74c3c; }
.stat-card.complaints i { color: #e74c3c; }

.stat-card.materials { border-top: 4px solid #9b59b6; }
.stat-card.materials i { color: #9b59b6; }

.stat-card.custom { border-top: 4px solid #2ecc71; }
.stat-card.custom i { color: #2ecc71; }

.stat-number {
    font-size: 32px;
    font-weight: 600;
    margin: 10px 0;
}

.stat-label {
    color: #666;
    font-size: 14px;
}

/* Product Management */
.product-form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 30px;
    background: #f9f9f9;
    padding: 25px;
    border-radius: 10px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #333;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    font-family: 'Poppins', sans-serif;
    transition: border-color 0.3s;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #9c7c38;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-buttons {
    grid-column: 1 / -1;
    display: flex;
    gap: 15px;
}

.btn {
    padding: 12px 30px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    font-size: 14px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
}

.btn-primary {
    background: #9c7c38;
    color: white;
}

.btn-primary:hover {
    background: #7a612d;
}

.btn-secondary {
    background: #3498db;
    color: white;
}

.btn-secondary:hover {
    background: #2980b9;
}

.btn-danger {
    background: #e74c3c;
    color: white;
}

.btn-danger:hover {
    background: #c0392b;
}

/* Products Table */
.products-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.products-table th {
    background: #f8f4eb;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    color: #1f2a44;
    border-bottom: 2px solid #e0d6c2;
}

.products-table td {
    padding: 15px;
    border-bottom: 1px solid #eee;
}

.products-table tr:hover {
    background: #f9f9f9;
}

.product-image {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 6px;
}

.action-buttons {
    display: flex;
    gap: 10px;
}

.action-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
}

.edit-btn {
    background: #3498db;
    color: white;
}

.delete-btn {
    background: #e74c3c;
    color: white;
}

/* Complaints Table */
.complaints-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.complaints-table th {
    background: #f8f4eb;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    color: #1f2a44;
    border-bottom: 2px solid #e0d6c2;
}

.complaints-table td {
    padding: 15px;
    border-bottom: 1px solid #eee;
}

.status-badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
}

.status-pending {
    background: #fff3cd;
    color: #856404;
}

.status-resolved {
    background: #d4edda;
    color: #155724;
}

/* Image Upload */
.image-preview {
    width: 150px;
    height: 150px;
    border: 2px dashed #ddd;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    overflow: hidden;
}

.image-preview img {
    max-width: 100%;
    max-height: 100%;
    display: none;
}

.image-preview span {
    color: #999;
    font-size: 14px;
}

/* Materials Search & Filter */
.materials-toolbar {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

.search-box {
    flex: 1;
    min-width: 250px;
    position: relative;
}

.search-box input {
    width: 100%;
    padding: 12px 40px 12px 15px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
}

.search-box i {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #999;
}

.filter-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 10px 20px;
    background: white;
    border: 2px solid #ddd;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s;
}

.filter-btn:hover {
    border-color: #9c7c38;
    color: #9c7c38;
}

.filter-btn.active {
    background: #9c7c38;
    color: white;
    border-color: #9c7c38;
}

/* Materials Grid */
.materials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.material-card {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.3s;
    border-left: 4px solid;
}

.material-card:hover {
    transform: translateY(-5px);
}

.material-card.high-stock { border-left-color: #2ecc71; }
.material-card.medium-stock { border-left-color: #f39c12; }
.material-card.low-stock { border-left-color: #e74c3c; }

.material-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.material-name {
    font-size: 18px;
    font-weight: 600;
    color: #1f2a44;
}

.material-type {
    font-size: 12px;
    color: #666;
    background: #f0f0f0;
    padding: 4px 10px;
    border-radius: 20px;
    display: inline-block;
    margin-top: 5px;
}

.stock-indicator {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 12px;
    font-weight: 500;
    padding: 4px 10px;
    border-radius: 20px;
    color: white;
}

.stock-high { background: #2ecc71; }
.stock-medium { background: #f39c12; }
.stock-low { background: #e74c3c; }

.material-details {
    margin: 15px 0;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    font-size: 14px;
}

.detail-label {
    color: #666;
}

.detail-value {
    color: #333;
    font-weight: 500;
}

.color-preview {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid #eee;
    display: inline-block;
    vertical-align: middle;
    margin-right: 5px;
}

.material-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.material-btn {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
}

/* Quick Actions */
.quick-actions-row {
    display: flex;
    gap: 15px;
    margin: 25px 0;
    flex-wrap: wrap;
}

.quick-action-btn {
    padding: 12px 25px;
    background: white;
    border: 2px solid #9c7c38;
    border-radius: 6px;
    color: #9c7c38;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 10px;
}

.quick-action-btn:hover {
    background: #9c7c38;
    color: white;
}

/* Materials Summary */
.materials-summary {
    background: linear-gradient(135deg, #1f2a44, #2f4670);
    color: white;
    padding: 25px;
    border-radius: 10px;
    margin: 30px 0;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.summary-item {
    text-align: center;
}

.summary-number {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 5px;
}

.summary-label {
    font-size: 14px;
    opacity: 0.8;
}

/* Add Material Modal */
.material-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.material-modal-content {
    background: white;
    width: 90%;
    max-width: 600px;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    max-height: 90vh;
    overflow-y: auto;
}

.material-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.material-modal-header h3 {
    margin: 0;
    color: #1f2a44;
}

.close-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
}

.color-options {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 10px;
}

.color-option {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 2px solid transparent;
    cursor: pointer;
    transition: transform 0.3s;
}

.color-option:hover {
    transform: scale(1.1);
}

.color-option.selected {
    border-color: #333;
    transform: scale(1.1);
}

/* Design Ideas */
.design-ideas-section {
    background: #f9f9f9;
    padding: 25px;
    border-radius: 10px;
    margin-bottom: 25px;
}

.ideas-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.idea-item {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.idea-item h4 {
    color: #1f2a44;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.idea-item img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 10px;
}

/* Password Change */
.password-form {
    max-width: 500px;
    margin: 0 auto;
    background: #f9f9f9;
    padding: 25px;
    border-radius: 10px;
}

.password-form .form-group {
    margin-bottom: 20px;
}

.password-strength {
    height: 5px;
    background: #ddd;
    border-radius: 3px;
    margin-top: 5px;
    overflow: hidden;
}

.strength-bar {
    height: 100%;
    width: 0%;
    transition: width 0.3s, background 0.3s;
}

.strength-weak { background: #e74c3c; width: 33%; }
.strength-medium { background: #f39c12; width: 66%; }
.strength-strong { background: #2ecc71; width: 100%; }

.password-requirements {
    background: #fff3cd;
    padding: 15px;
    border-radius: 6px;
    margin-top: 20px;
    font-size: 13px;
}

.password-requirements ul {
    margin-left: 20px;
    margin-top: 10px;
}

/* Responsive */
@media (max-width: 1024px) {
    .dashboard-container {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        order: 2;
    }
    
    .sidebar-menu {
        display: flex;
        overflow-x: auto;
    }
    
    .sidebar-menu li {
        white-space: nowrap;
    }
}

@media (max-width: 768px) {
    .product-form {
        grid-template-columns: 1fr;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .admin-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .materials-toolbar {
        flex-direction: column;
    }
    
    .search-box {
        min-width: 100%;
    }
    
    .materials-grid {
        grid-template-columns: 1fr;
    }
}

/* Alert Messages */
.alert {
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.alert-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

/* Quick Actions */
.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin: 30px 0;
}

.action-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: all 0.3s;
}

.action-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}

.action-card i {
    font-size: 30px;
    margin-bottom: 10px;
    color: #9c7c38;
}

/* Business Tools */
.business-tools {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.tool-card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.3s;
}

.tool-card:hover {
    transform: translateY(-5px);
}

.tool-card i {
    font-size: 40px;
    color: #9c7c38;
    margin-bottom: 15px;
}

.tool-card h3 {
    color: #1f2a44;
    margin-bottom: 10px;
}

.tool-card p {
    color: #666;
    font-size: 14px;
    margin-bottom: 20px;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 50px 20px;
    color: #666;
    display: none;
}

.empty-state i {
    font-size: 50px;
    color: #ddd;
    margin-bottom: 20px;
}

.empty-state h3 {
    color: #999;
    margin-bottom: 10px;
}
</style>
</head>
<body>
    <!-- Header -->
    <div class="admin-header">
        <h1><i class="fas fa-crown"></i> Kallakriti Admin Dashboard</h1>
        <div class="admin-info">
            <span><i class="fas fa-user-circle"></i> Admin</span>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <ul class="sidebar-menu">
                <li class="active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </li>
                <li onclick="showSection('products')">
                    <i class="fas fa-box"></i> Product Management
                </li>
                <li onclick="showSection('addProduct')">
                    <i class="fas fa-plus-circle"></i> Add New Product
                </li>
                <li onclick="showSection('complaints')">
                    <i class="fas fa-exclamation-triangle"></i> Customer Complaints
                </li>
                <li onclick="showSection('materials')">
                    <i class="fas fa-spool"></i> Materials Stock
                </li>
                <li onclick="showSection('designs')">
                    <i class="fas fa-palette"></i> Design Ideas
                </li>
                <li onclick="showSection('password')">
                    <i class="fas fa-key"></i> Change Password
                </li>
                <li onclick="showSection('settings')">
                    <i class="fas fa-cog"></i> Settings
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="section active">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h2>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card products">
                        <i class="fas fa-box"></i>
                        <div class="stat-number" id="totalProducts">0</div>
                        <div class="stat-label">Active Products</div>
                    </div>
                    
                    <div class="stat-card complaints">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="stat-number" id="totalComplaints">0</div>
                        <div class="stat-label">Pending Complaints</div>
                    </div>
                    
                    <div class="stat-card materials">
                        <i class="fas fa-spool"></i>
                        <div class="stat-number" id="materialStock">0</div>
                        <div class="stat-label">Yarn Colors</div>
                    </div>
                    
                    <div class="stat-card custom">
                        <i class="fas fa-star"></i>
                        <div class="stat-number" id="customOrders">0</div>
                        <div class="stat-label">Custom Orders</div>
                    </div>
                </div>

                <!-- Business Tools -->
                <h3><i class="fas fa-tools"></i> Business Tools</h3>
                <div class="business-tools">
                    <div class="tool-card">
                        <i class="fas fa-calculator"></i>
                        <h3>Pricing Calculator</h3>
                        <p>Calculate product pricing based on material cost and time</p>
                        <button class="btn btn-primary" onclick="openPricingCalculator()">
                            <i class="fas fa-calculator"></i> Open Calculator
                        </button>
                    </div>
                    
                    <div class="tool-card">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>Order Timeline</h3>
                        <p>Track custom order deadlines and delivery dates</p>
                        <button class="btn btn-primary" onclick="viewOrderTimeline()">
                            <i class="fas fa-calendar"></i> View Timeline
                        </button>
                    </div>
                    
                    <div class="tool-card">
                        <i class="fas fa-chart-line"></i>
                        <h3>Sales Analytics</h3>
                        <p>View product popularity and sales trends</p>
                        <button class="btn btn-primary" onclick="viewSalesAnalytics()">
                            <i class="fas fa-chart-bar"></i> View Analytics
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                <div class="quick-actions">
                    <div class="action-card" onclick="showSection('addProduct')">
                        <i class="fas fa-plus"></i>
                        <div>Add Product</div>
                    </div>
                    <div class="action-card" onclick="showSection('materials')">
                        <i class="fas fa-spool"></i>
                        <div>Check Stock</div>
                    </div>
                    <div class="action-card" onclick="showSection('complaints')">
                        <i class="fas fa-comments"></i>
                        <div>View Complaints</div>
                    </div>
                    <div class="action-card" onclick="backupData()">
                        <i class="fas fa-save"></i>
                        <div>Backup Data</div>
                    </div>
                </div>
            </div>

            <!-- Product Management Section -->
            <div id="products" class="section">
                <h2><i class="fas fa-box"></i> Product Management</h2>
                <p>Edit or delete existing products. Click "Edit" to modify product details.</p>
                
                <div id="productsTableContainer">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Add Product Section -->
            <div id="addProduct" class="section">
                <h2><i class="fas fa-plus-circle"></i> Add New Product</h2>
                
                <form id="addProductForm" class="product-form" onsubmit="addNewProduct(event)">
                    <div class="form-group">
                        <label for="productName">Product Name *</label>
                        <input type="text" id="productName" required placeholder="e.g., Crochet Rose Bouquet">
                    </div>
                    
                    <div class="form-group">
                        <label for="productPrice">Price (â‚¹) *</label>
                        <input type="number" id="productPrice" required placeholder="e.g., 299" min="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="productCategory">Category *</label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                            <option value="flowers">Crochet Flowers</option>
                            <option value="toys">Crochet Toys</option>
                            <option value="accessories">Accessories</option>
                            <option value="baby">Baby Items</option>
                            <option value="custom">Custom Orders</option>
                            <option value="money">Money Bouquets</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="productImageUrl">Image URL</label>
                        <input type="url" id="productImageUrl" placeholder="https://example.com/image.jpg">
                    </div>
                    
                    <div class="form-group full-width">
                        <label>Image Preview</label>
                        <div class="image-preview" id="imagePreview">
                            <span>Preview will appear here</span>
                            <img id="previewImage" src="" alt="Preview">
                        </div>
                        <small>You can use free image hosting services like ImgBB or Unsplash for images</small>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Add Product
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="clearForm()">
                            <i class="fas fa-redo"></i> Clear Form
                        </button>
                    </div>
                </form>
            </div>

            <!-- Complaints Section -->
            <div id="complaints" class="section">
                <h2><i class="fas fa-exclamation-triangle"></i> Customer Complaints</h2>
                
                <div class="complaints-table-container">
                    <table class="complaints-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="complaintsTableBody">
                            <!-- Complaints will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Materials Stock Section -->
            <div id="materials" class="section">
                <h2><i class="fas fa-spool"></i> Materials Stock Management</h2>
                <p>Track your yarn and material inventory for crochet projects.</p>
                
                <!-- Materials Summary -->
                <div class="materials-summary">
                    <h3 style="color: white; margin: 0;"><i class="fas fa-chart-pie"></i> Materials Overview</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <div class="summary-number" id="totalMaterials">0</div>
                            <div class="summary-label">Total Items</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-number" id="lowStockCount">0</div>
                            <div class="summary-label">Low Stock</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-number" id="yarnCount">0</div>
                            <div class="summary-label">Yarn Types</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-number" id="accessoryCount">0</div>
                            <div class="summary-label">Accessories</div>
                        </div>
                    </div>
                </div>

                <!-- Search & Filter Toolbar -->
                <div class="materials-toolbar">
                    <div class="search-box">
                        <input type="text" id="materialSearch" placeholder="Search materials by name, type, or color..." onkeyup="searchMaterials()">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterMaterials('all')">
                            All Items
                        </button>
                        <button class="filter-btn" onclick="filterMaterials('yarn')">
                            <i class="fas fa-spool"></i> Yarn
                        </button>
                        <button class="filter-btn" onclick="filterMaterials('thread')">
                            <i class="fas fa-thread"></i> Thread
                        </button>
                        <button class="filter-btn" onclick="filterMaterials('accessory')">
                            <i class="fas fa-tools"></i> Accessories
                        </button>
                        <button class="filter-btn" onclick="filterMaterials('low')">
                            <i class="fas fa-exclamation-triangle"></i> Low Stock
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions-row">
                    <button class="quick-action-btn" onclick="openAddMaterialModal()">
                        <i class="fas fa-plus"></i> Add New Material
                    </button>
                    <button class="quick-action-btn" onclick="checkReorderList()">
                        <i class="fas fa-shopping-cart"></i> Reorder List
                    </button>
                    <button class="quick-action-btn" onclick="exportMaterialsList()">
                        <i class="fas fa-download"></i> Export List
                    </button>
                </div>

                <!-- Materials Grid -->
                <div id="materialsGrid" class="materials-grid">
                    <!-- Materials will be loaded here -->
                </div>

                <!-- Empty State -->
                <div id="emptyMaterials" class="empty-state">
                    <i class="fas fa-spool"></i>
                    <h3>No materials found</h3>
                    <p>Add your first material to start tracking inventory</p>
                    <button class="btn btn-primary" onclick="openAddMaterialModal()" style="margin-top: 20px;">
                        <i class="fas fa-plus"></i> Add First Material
                    </button>
                </div>
            </div>

            <!-- Design Ideas Section -->
            <div id="designs" class="section">
                <h2><i class="fas fa-palette"></i> Design Ideas & Inspiration</h2>
                <p>Save and organize your crochet design ideas and patterns.</p>
                
                <div class="design-ideas-section">
                    <h3><i class="fas fa-lightbulb"></i> Design Collection</h3>
                    <div class="ideas-list" id="ideasList">
                        <!-- Design ideas will be loaded here -->
                    </div>
                    
                    <div class="form-buttons" style="margin-top: 20px;">
                        <button class="btn btn-success" onclick="addNewDesign()">
                            <i class="fas fa-plus"></i> Add New Design Idea
                        </button>
                    </div>
                </div>
            </div>

            <!-- Change Password Section -->
            <div id="password" class="section">
                <h2><i class="fas fa-key"></i> Change Admin Password</h2>
                <p>Update your admin login password for security.</
                        </p>
                    <form id="passwordForm" class="password-form" onsubmit="changePassword(event)">
                        <div class="form-group">
                            <label for="currentPassword">Current Password *</label>
                            <input type="password" id="currentPassword" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password *</label>
                            <input type="password" id="newPassword" required onkeyup="checkPasswordStrength()">
                            <div class="password-strength">
                                <div class="strength-bar" id="passwordStrength"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password *</label>
                            <input type="password" id="confirmPassword" required onkeyup="checkPasswordMatch()">
                            <small id="passwordMatchMessage" style="display: none;"></small>
                        </div>
                        
                        <div class="password-requirements">
                            <strong>Password Requirements:</strong>
                            <ul>
                                <li>At least 8 characters long</li>
                                <li>Contains at least one uppercase letter</li>
                                <li>Contains at least one lowercase letter</li>
                                <li>Contains at least one number</li>
                                <li>Contains at least one special character</li>
                            </ul>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-key"></i> Change Password
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Settings Section -->
                <div id="settings" class="section">
                    <h2><i class="fas fa-cog"></i> Admin Settings</h2>
                    <p>Configure your admin dashboard preferences.</p>
                    
                    <div class="settings-grid">
                        <div class="setting-card">
                            <h3><i class="fas fa-bell"></i> Notifications</h3>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="emailNotifications" checked>
                                    Email notifications for new orders
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="complaintNotifications" checked>
                                    Notify on new complaints
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="lowStockNotifications" checked>
                                    Low stock alerts
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-card">
                            <h3><i class="fas fa-palette"></i> Theme</h3>
                            <div class="form-group">
                                <label>Dashboard Theme</label>
                                <select id="themeSelect">
                                    <option value="default">Default Theme</option>
                                    <option value="dark">Dark Mode</option>
                                    <option value="light">Light Mode</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="setting-card">
                            <h3><i class="fas fa-database"></i> Data Management</h3>
                            <button class="btn btn-secondary" onclick="exportData()" style="margin-bottom: 10px;">
                                <i class="fas fa-download"></i> Export All Data
                            </button>
                            <button class="btn btn-danger" onclick="resetData()">
                                <i class="fas fa-trash"></i> Reset All Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Material Modal -->
        <div id="addMaterialModal" class="material-modal">
            <div class="material-modal-content">
                <div class="material-modal-header">
                    <h3><i class="fas fa-plus"></i> Add New Material</h3>
                    <button class="close-modal" onclick="closeAddMaterialModal()">&times;</button>
                </div>
                
                <form id="addMaterialForm" onsubmit="saveNewMaterial(event)">
                    <div class="product-form">
                        <div class="form-group">
                            <label for="materialName">Material Name *</label>
                            <input type="text" id="materialName" required placeholder="e.g., Red Cotton Yarn">
                        </div>
                        
                        <div class="form-group">
                            <label for="materialType">Type *</label>
                            <select id="materialType" required>
                                <option value="">Select Type</option>
                                <option value="yarn">Yarn</option>
                                <option value="thread">Thread</option>
                                <option value="hook">Crochet Hook</option>
                                <option value="needle">Needle</option>
                                <option value="accessory">Accessory</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="materialColor">Color</label>
                            <div class="color-options" id="colorOptions">
                                <!-- Color options will be generated here -->
                            </div>
                            <input type="color" id="materialColorPicker" style="margin-top: 10px; width: 100%;" onchange="updateSelectedColor(this.value)">
                        </div>
                        
                        <div class="form-group">
                            <label for="materialStock">Current Stock *</label>
                            <input type="number" id="materialStock" required min="0" placeholder="e.g., 50">
                        </div>
                        
                        <div class="form-group">
                            <label for="materialUnit">Unit</label>
                            <select id="materialUnit">
                                <option value="grams">Grams</option>
                                <option value="meters">Meters</option>
                                <option value="pcs">Pieces</option>
                                <option value="sets">Sets</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="materialNotes">Notes</label>
                            <textarea id="materialNotes" rows="3" placeholder="Any additional notes about this material..."></textarea>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Material
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="closeAddMaterialModal()">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Alert Container -->
        <div id="alertContainer" style="position: fixed; top: 20px; right: 20px; z-index: 1000;"></div>

        <script>
            // Dashboard Data
            let dashboardData = {
                totalProducts: 12,
                totalComplaints: 3,
                materialStock: 24,
                customOrders: 8,
                lowStockCount: 2,
                yarnCount: 15,
                accessoryCount: 9,
                totalMaterials: 24
            };

            // Sample Products Data
            let products = [
                {
                    id: 1,
                    name: "Crochet Rose Bouquet",
                    category: "flowers",
                    price: 299,
                    image: "https://images.unsplash.com/photo-1566438480895-9f7bf5b05e86?w=200&h=200&fit=crop"
                },
                {
                    id: 2,
                    name: "Teddy Bear",
                    category: "toys",
                    price: 399,
                    image: "https://images.unsplash.com/photo-1560743173-567a3b5658b1?w=200&h=200&fit=crop"
                },
                {
                    id: 3,
                    name: "Baby Booties",
                    category: "baby",
                    price: 199,
                    image: "https://images.unsplash.com/photo-1515377905703-c4788e51af15?w=200&h=200&fit=crop"
                }
            ];

            // Sample Complaints Data
            let complaints = [
                {
                    id: 1,
                    name: "Rahul Sharma",
                    phone: "9876543210",
                    type: "Delivery Delay",
                    date: "2024-01-15",
                    status: "pending"
                },
                {
                    id: 2,
                    name: "Priya Patel",
                    phone: "9876543211",
                    type: "Product Quality",
                    date: "2024-01-14",
                    status: "resolved"
                },
                {
                    id: 3,
                    name: "Amit Kumar",
                    phone: "9876543212",
                    type: "Wrong Item",
                    date: "2024-01-13",
                    status: "pending"
                }
            ];

            // Sample Materials Data
            let materials = [
                {
                    id: 1,
                    name: "Red Cotton Yarn",
                    type: "yarn",
                    color: "#ff0000",
                    stock: 45,
                    unit: "grams",
                    notes: "For rose patterns",
                    minStock: 20
                },
                {
                    id: 2,
                    name: "Blue Acrylic Yarn",
                    type: "yarn",
                    color: "#0000ff",
                    stock: 15,
                    unit: "grams",
                    notes: "Running low",
                    minStock: 20
                },
                {
                    id: 3,
                    name: "Crochet Hook 4mm",
                    type: "hook",
                    color: "#000000",
                    stock: 5,
                    unit: "pcs",
                    notes: "",
                    minStock: 3
                }
            ];

            // Sample Design Ideas
            let designIdeas = [
                {
                    id: 1,
                    title: "Floral Pattern",
                    type: "flowers",
                    description: "New rose and lily combination"
                },
                {
                    id: 2,
                    title: "Animal Toys",
                    type: "toys",
                    description: "Collection of farm animals"
                }
            ];

            // Initialize Dashboard
            document.addEventListener('DOMContentLoaded', function() {
                initializeDashboard();
                loadProducts();
                loadComplaints();
                loadMaterials();
                loadDesignIdeas();
                generateColorOptions();
            });

            // Initialize Dashboard
            function initializeDashboard() {
                updateStats();
                setupEventListeners();
            }

            // Update Dashboard Stats
            function updateStats() {
                document.getElementById('totalProducts').textContent = dashboardData.totalProducts;
                document.getElementById('totalComplaints').textContent = dashboardData.totalComplaints;
                document.getElementById('materialStock').textContent = dashboardData.materialStock;
                document.getElementById('customOrders').textContent = dashboardData.customOrders;
                document.getElementById('lowStockCount').textContent = dashboardData.lowStockCount;
                document.getElementById('yarnCount').textContent = dashboardData.yarnCount;
                document.getElementById('accessoryCount').textContent = dashboardData.accessoryCount;
                document.getElementById('totalMaterials').textContent = dashboardData.totalMaterials;
            }

            // Setup Event Listeners
            function setupEventListeners() {
                // Image preview for product form
                const imageUrlInput = document.getElementById('productImageUrl');
                const previewImage = document.getElementById('previewImage');
                const imagePreview = document.getElementById('imagePreview');
                
                if (imageUrlInput) {
                    imageUrlInput.addEventListener('input', function() {
                        if (this.value) {
                            previewImage.src = this.value;
                            previewImage.style.display = 'block';
                            imagePreview.querySelector('span').style.display = 'none';
                        } else {
                            previewImage.style.display = 'none';
                            imagePreview.querySelector('span').style.display = 'block';
                        }
                    });
                }

                // Theme selector
                const themeSelect = document.getElementById('themeSelect');
                if (themeSelect) {
                    themeSelect.addEventListener('change', function() {
                        changeTheme(this.value);
                    });
                }

                // Material search
                const materialSearch = document.getElementById('materialSearch');
                if (materialSearch) {
                    materialSearch.addEventListener('keyup', searchMaterials);
                }
            }

            // Show Section Function
            function showSection(sectionId) {
                // Hide all sections
                const sections = document.querySelectorAll('.section');
                sections.forEach(section => {
                    section.classList.remove('active');
                });

                // Show selected section
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                }

                // Update active menu item
                const menuItems = document.querySelectorAll('.sidebar-menu li');
                menuItems.forEach(item => {
                    item.classList.remove('active');
                });

                // Find and activate the corresponding menu item
                const activeMenuItem = Array.from(menuItems).find(item => {
                    return item.getAttribute('onclick')?.includes(sectionId);
                });
                
                if (activeMenuItem) {
                    activeMenuItem.classList.add('active');
                } else {
                    // If no specific menu item found, activate dashboard
                    menuItems[0].classList.add('active');
                }

                // Load section-specific data
                switch(sectionId) {
                    case 'dashboard':
                        updateStats();
                        break;
                    case 'products':
                        loadProducts();
                        break;
                    case 'complaints':
                        loadComplaints();
                        break;
                    case 'materials':
                        loadMaterials();
                        break;
                    case 'designs':
                        loadDesignIdeas();
                        break;
                }

                showAlert(`Switched to ${getSectionName(sectionId)}`, 'success');
            }

            function getSectionName(sectionId) {
                const sectionNames = {
                    'dashboard': 'Dashboard',
                    'products': 'Products',
                    'addProduct': 'Add Product',
                    'complaints': 'Complaints',
                    'materials': 'Materials',
                    'designs': 'Designs',
                    'password': 'Password',
                    'settings': 'Settings'
                };
                return sectionNames[sectionId] || sectionId;
            }

            // Load Products
            function loadProducts() {
                const tableBody = document.getElementById('productsTableBody');
                if (!tableBody) return;

                tableBody.innerHTML = '';
                
                products.forEach(product => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>
                            <img src="${product.image}" alt="${product.name}" class="product-image" 
                                 onerror="this.src='https://images.unsplash.com/photo-1560743173-567a3b5658b1?w=200&h=200&fit=crop'">
                        </td>
                        <td>${product.name}</td>
                        <td>${product.category}</td>
                        <td>â‚¹${product.price}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn edit-btn" onclick="editProduct(${product.id})">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="action-btn delete-btn" onclick="deleteProduct(${product.id})">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            // Load Complaints
            function loadComplaints() {
                const tableBody = document.getElementById('complaintsTableBody');
                if (!tableBody) return;

                tableBody.innerHTML = '';
                
                complaints.forEach(complaint => {
                    const row = document.createElement('tr');
                    const statusClass = complaint.status === 'pending' ? 'status-pending' : 'status-resolved';
                    const statusText = complaint.status === 'pending' ? 'Pending' : 'Resolved';
                    
                    row.innerHTML = `
                        <td>#${complaint.id}</td>
                        <td>${complaint.name}</td>
                        <td>${complaint.phone}</td>
                        <td>${complaint.type}</td>
                        <td>${complaint.date}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="action-btn edit-btn" onclick="viewComplaint(${complaint.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            ${complaint.status === 'pending' ? 
                                `<button class="action-btn btn-primary" onclick="resolveComplaint(${complaint.id})">
                                    <i class="fas fa-check"></i> Resolve
                                </button>` : ''
                            }
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            // Load Materials
            function loadMaterials() {
                const materialsGrid = document.getElementById('materialsGrid');
                const emptyState = document.getElementById('emptyMaterials');
                
                if (!materialsGrid) return;

                materialsGrid.innerHTML = '';
                
                if (materials.length === 0) {
                    emptyState.style.display = 'block';
                    materialsGrid.style.display = 'none';
                    return;
                }

                emptyState.style.display = 'none';
                materialsGrid.style.display = 'grid';

                materials.forEach(material => {
                    const stockLevel = getStockLevel(material.stock, material.minStock || 20);
                    const stockClass = `stock-${stockLevel}`;
                    const cardClass = `${stockLevel}-stock`;
                    
                    const card = document.createElement('div');
                    card.className = `material-card ${cardClass}`;
                    card.innerHTML = `
                        <div class="material-header">
                            <div>
                                <div class="material-name">${material.name}</div>
                                <span class="material-type">${material.type}</span>
                            </div>
                            <span class="stock-indicator ${stockClass}">
                                <i class="fas fa-${stockLevel === 'low' ? 'exclamation-triangle' : 'check'}"></i>
                                ${stockLevel.toUpperCase()}
                            </span>
                        </div>
                        
                        <div class="material-details">
                            <div class="detail-row">
                                <span class="detail-label">Color:</span>
                                <span class="detail-value">
                                    <span class="color-preview" style="background-color: ${material.color}"></span>
                                    ${material.color}
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Stock:</span>
                                <span class="detail-value">${material.stock} ${material.unit}</span>
                            </div>
                            ${material.notes ? `
                            <div class="detail-row">
                                <span class="detail-label">Notes:</span>
                                <span class="detail-value">${material.notes}</span>
                            </div>` : ''}
                        </div>
                        
                        <div class="material-actions">
                            <button class="material-btn btn-primary" onclick="editMaterial(${material.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="material-btn btn-danger" onclick="deleteMaterial(${material.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    `;
                    materialsGrid.appendChild(card);
                });
            }

            function getStockLevel(stock, minStock) {
                if (stock <= minStock * 0.3) return 'low';
                if (stock <= minStock * 0.6) return 'medium';
                return 'high';
            }

            // Load Design Ideas
            function loadDesignIdeas() {
                const ideasList = document.getElementById('ideasList');
                if (!ideasList) return;

                ideasList.innerHTML = '';
                
                designIdeas.forEach(idea => {
                    const ideaItem = document.createElement('div');
                    ideaItem.className = 'idea-item';
                    ideaItem.innerHTML = `
                        <h4><i class="fas fa-lightbulb"></i> ${idea.title}</h4>
                        <p>${idea.description}</p>
                        <small>Type: ${idea.type}</small>
                    `;
                    ideasList.appendChild(ideaItem);
                });
            }

            // Add New Product
            function addNewProduct(event) {
                event.preventDefault();
                
                const name = document.getElementById('productName').value;
                const price = document.getElementById('productPrice').value;
                const category = document.getElementById('productCategory').value;
                const imageUrl = document.getElementById('productImageUrl').value || 
                                'https://images.unsplash.com/photo-1560743173-567a3b5658b1?w=200&h=200&fit=crop';

                const newProduct = {
                    id: products.length + 1,
                    name: name,
                    price: parseInt(price),
                    category: category,
                    image: imageUrl
                };

                products.push(newProduct);
                dashboardData.totalProducts++;
                
                showAlert('Product added successfully!', 'success');
                clearForm();
                loadProducts();
                updateStats();
            }

            // Clear Form
            function clearForm() {
                document.getElementById('addProductForm').reset();
                document.getElementById('previewImage').style.display = 'none';
                document.getElementById('imagePreview').querySelector('span').style.display = 'block';
            }

            // Edit Product
            function editProduct(id) {
                const product = products.find(p => p.id === id);
                if (product) {
                    // Populate form with product data
                    document.getElementById('productName').value = product.name;
                    document.getElementById('productPrice').value = product.price;
                    document.getElementById('productCategory').value = product.category;
                    document.getElementById('productImageUrl').value = product.image;
                    
                    // Show image preview
                    const previewImage = document.getElementById('previewImage');
                    previewImage.src = product.image;
                    previewImage.style.display = 'block';
                    document.getElementById('imagePreview').querySelector('span').style.display = 'none';
                    
                    // Switch to add product section
                    showSection('addProduct');
                    
                    // Change form to edit mode
                    const form = document.getElementById('addProductForm');
                    form.onsubmit = function(e) {
                        e.preventDefault();
                        updateProduct(id);
                    };
                    
                    const submitBtn = form.querySelector('.btn-primary');
                    submitBtn.innerHTML = '<i class="fas fa-save"></i> Update Product';
                    
                    showAlert('Edit product: ' + product.name, 'info');
                }
            }

            function updateProduct(id) {
                const name = document.getElementById('productName').value;
                const price = document.getElementById('productPrice').value;
                const category = document.getElementById('productCategory').value;
                const imageUrl = document.getElementById('productImageUrl').value;

                const index = products.findIndex(p => p.id === id);
                if (index !== -1) {
                    products[index] = {
                        ...products[index],
                        name: name,
                        price: parseInt(price),
                        category: category,
                        image: imageUrl
                    };
                    
                    showAlert('Product updated successfully!', 'success');
                    loadProducts();
                    resetProductForm();
                }
            }

            function resetProductForm() {
                clearForm();
                const form = document.getElementById('addProductForm');
                form.onsubmit = addNewProduct;
                const submitBtn = form.querySelector('.btn-primary');
                submitBtn.innerHTML = '<i class="fas fa-save"></i> Add Product';
            }

            // Delete Product
            function deleteProduct(id) {
                if (confirm('Are you sure you want to delete this product?')) {
                    products = products.filter(p => p.id !== id);
                    dashboardData.totalProducts = Math.max(0, dashboardData.totalProducts - 1);
                    
                    showAlert('Product deleted successfully!', 'success');
                    loadProducts();
                    updateStats();
                }
            }

            // View Complaint
            function viewComplaint(id) {
                const complaint = complaints.find(c => c.id === id);
                if (complaint) {
                    alert(`Complaint Details:\n\nID: #${complaint.id}\nName: ${complaint.name}\nPhone: ${complaint.phone}\nType: ${complaint.type}\nDate: ${complaint.date}\nStatus: ${complaint.status}`);
                }
            }

            // Resolve Complaint
            function resolveComplaint(id) {
                const index = complaints.findIndex(c => c.id === id);
                if (index !== -1) {
                    complaints[index].status = 'resolved';
                    dashboardData.totalComplaints = Math.max(0, dashboardData.totalComplaints - 1);
                    
                    showAlert('Complaint marked as resolved!', 'success');
                    loadComplaints();
                    updateStats();
                }
            }

            // Generate Color Options
            function generateColorOptions() {
                const colorOptions = document.getElementById('colorOptions');
                if (!colorOptions) return;

                const colors = [
                    '#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff',
                    '#ff9999', '#99ff99', '#9999ff', '#ffcc00', '#ff66cc', '#66ccff',
                    '#ff3300', '#33cc33', '#3333cc', '#996633', '#663399', '#339966'
                ];

                colorOptions.innerHTML = '';
                
                colors.forEach(color => {
                    const colorOption = document.createElement('div');
                    colorOption.className = 'color-option';
                    colorOption.style.backgroundColor = color;
                    colorOption.setAttribute('data-color', color);
                    colorOption.onclick = function() {
                        selectColor(color);
                    };
                    colorOptions.appendChild(colorOption);
                });
            }

            function selectColor(color) {
                // Remove selected class from all color options
                document.querySelectorAll('.color-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Add selected class to clicked color
                event.target.classList.add('selected');
                
                // Update color picker
                document.getElementById('materialColorPicker').value = color;
            }

            function updateSelectedColor(color) {
                // Update selected color in color options
                document.querySelectorAll('.color-option').forEach(option => {
                    if (option.getAttribute('data-color') === color) {
                        option.classList.add('selected');
                    } else {
                        option.classList.remove('selected');
                    }
                });
            }

            // Material Modal Functions
            function openAddMaterialModal() {
                document.getElementById('addMaterialModal').style.display = 'flex';
            }

            function closeAddMaterialModal() {
                document.getElementById('addMaterialModal').style.display = 'none';
                document.getElementById('addMaterialForm').reset();
            }

            function saveNewMaterial(event) {
                event.preventDefault();
                
                const name = document.getElementById('materialName').value;
                const type = document.getElementById('materialType').value;
                const color = document.getElementById('materialColorPicker').value;
                const stock = parseInt(document.getElementById('materialStock').value);
                const unit = document.getElementById('materialUnit').value;
                const notes = document.getElementById('materialNotes').value;

                const newMaterial = {
                    id: materials.length + 1,
                    name: name,
                    type: type,
                    color: color,
                    stock: stock,
                    unit: unit,
                    notes: notes,
                    minStock: 20
                };

                materials.push(newMaterial);
                dashboardData.totalMaterials++;
                
                if (type === 'yarn') dashboardData.yarnCount++;
                if (type === 'accessory') dashboardData.accessoryCount++;
                
                // Check if low stock
                if (stock <= 20) {
                    dashboardData.lowStockCount++;
                }
                
                showAlert('Material added successfully!', 'success');
                closeAddMaterialModal();
                loadMaterials();
                updateStats();
            }

            function editMaterial(id) {
                const material = materials.find(m => m.id === id);
                if (material) {
                    // Populate modal with material data
                    document.getElementById('materialName').value = material.name;
                    document.getElementById('materialType').value = material.type;
                    document.getElementById('materialColorPicker').value = material.color;
                    document.getElementById('materialStock').value = material.stock;
                    document.getElementById('materialUnit').value = material.unit;
                    document.getElementById('materialNotes').value = material.notes;
                    
                    // Update selected color
                    selectColor(material.color);
                    
                    // Open modal in edit mode
                    openAddMaterialModal();
                    
                    // Change form to edit mode
                    const form = document.getElementById('addMaterialForm');
                    form.onsubmit = function(e) {
                        e.preventDefault();
                        updateMaterial(id);
                    };
                    
                    const submitBtn = form.querySelector('.btn-primary');
                    submitBtn.innerHTML = '<i class="fas fa-save"></i> Update Material';
                    submitBtn.onclick = function() { updateMaterial(id); };
                }
            }

            function updateMaterial(id) {
                const name = document.getElementById('materialName').value;
                const type = document.getElementById('materialType').value;
                const color = document.getElementById('materialColorPicker').value;
                const stock = parseInt(document.getElementById('materialStock').value);
                const unit = document.getElementById('materialUnit').value;
                const notes = document.getElementById('materialNotes').value;

                const index = materials.findIndex(m => m.id === id);
                if (index !== -1) {
                    materials[index] = {
                        ...materials[index],
                        name: name,
                        type: type,
                        color: color,
                        stock: stock,
                        unit: unit,
                        notes: notes
                    };
                    
                    showAlert('Material updated successfully!', 'success');
                    closeAddMaterialModal();
                    loadMaterials();
                    resetMaterialForm();
                }
            }

            function resetMaterialForm() {
                document.getElementById('addMaterialForm').reset();
                const form = document.getElementById('addMaterialForm');
                form.onsubmit = saveNewMaterial;
                const submitBtn = form.querySelector('.btn-primary');
                submitBtn.innerHTML = '<i class="fas fa-save"></i> Save Material';
            }

            function deleteMaterial(id) {
                if (confirm('Are you sure you want to delete this material?')) {
                    const material = materials.find(m => m.id === id);
                    materials = materials.filter(m => m.id !== id);
                    
                    dashboardData.totalMaterials = Math.max(0, dashboardData.totalMaterials - 1);
                    
                    if (material.type === 'yarn') dashboardData.yarnCount = Math.max(0, dashboardData.yarnCount - 1);
                    if (material.type === 'accessory') dashboardData.accessoryCount = Math.max(0, dashboardData.accessoryCount - 1);
                    
                    if (material.stock <= 20) {
                        dashboardData.lowStockCount = Math.max(0, dashboardData.lowStockCount - 1);
                    }
                    
                    showAlert('Material deleted successfully!', 'success');
                    loadMaterials();
                    updateStats();
                }
            }

            // Search Materials
            function searchMaterials() {
                const searchTerm = document.getElementById('materialSearch').value.toLowerCase();
                const filteredMaterials = materials.filter(material => 
                    material.name.toLowerCase().includes(searchTerm) ||
                    material.type.toLowerCase().includes(searchTerm) ||
                    material.color.toLowerCase().includes(searchTerm)
                );
                
                // Temporarily replace materials array for display
                const originalMaterials = [...materials];
                materials = filteredMaterials;
                loadMaterials();
                materials = originalMaterials; // Restore original array
            }

            // Filter Materials
            function filterMaterials(filterType) {
                // Update active filter button
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                let filteredMaterials = [];
                
                switch(filterType) {
                    case 'all':
                        filteredMaterials = materials;
                        break;
                    case 'yarn':
                        filteredMaterials = materials.filter(m => m.type === 'yarn');
                        break;
                    case 'thread':
                        filteredMaterials = materials.filter(m => m.type === 'thread');
                        break;
                    case 'accessory':
                        filteredMaterials = materials.filter(m => m.type === 'accessory');
                        break;
                    case 'low':
                        filteredMaterials = materials.filter(m => m.stock <= 20);
                        break;
                }
                
                // Temporarily replace materials array for display
                const originalMaterials = [...materials];
                materials = filteredMaterials;
                loadMaterials();
                materials = originalMaterials; // Restore original array
            }

            // Add New Design Idea
            function addNewDesign() {
                const title = prompt('Enter design title:');
                if (!title) return;
                
                const description = prompt('Enter design description:');
                if (!description) return;
                
                const type = prompt('Enter design type (flowers, toys, accessories, etc.):');
                if (!type) return;
                
                const newDesign = {
                    id: designIdeas.length + 1,
                    title: title,
                    description: description,
                    type: type
                };
                
                designIdeas.push(newDesign);
                showAlert('Design idea added successfully!', 'success');
                loadDesignIdeas();
            }

            // Password Strength Checker
            function checkPasswordStrength() {
                const password = document.getElementById('newPassword').value;
                const strengthBar = document.getElementById('passwordStrength');
                
                let strength = 0;
                
                // Length check
                if (password.length >= 8) strength++;
                
                // Contains uppercase
                if (/[A-Z]/.test(password)) strength++;
                
                // Contains lowercase
                if (/[a-z]/.test(password)) strength++;
                
                // Contains numbers
                if (/[0-9]/.test(password)) strength++;
                
                // Contains special characters
                if (/[^A-Za-z0-9]/.test(password)) strength++;
                
                // Update strength bar
                strengthBar.className = 'strength-bar';
                if (strength <= 2) {
                    strengthBar.classList.add('strength-weak');
                } else if (strength <= 4) {
                    strengthBar.classList.add('strength-medium');
                } else {
                    strengthBar.classList.add('strength-strong');
                }
            }

            function checkPasswordMatch() {
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const message = document.getElementById('passwordMatchMessage');
                
                if (!newPassword || !confirmPassword) {
                    message.style.display = 'none';
                    return;
                }
                
                if (newPassword === confirmPassword) {
                    message.textContent = 'âœ“ Passwords match';
                    message.style.color = 'green';
                } else {
                    message.textContent = 'âœ— Passwords do not match';
                    message.style.color = 'red';
                }
                message.style.display = 'block';
            }

            // Change Password
            function changePassword(event) {
                event.preventDefault();
                
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                // Simple validation - in real app, you'd verify current password with backend
                if (newPassword !== confirmPassword) {
                    showAlert('Passwords do not match!', 'error');
                    return;
                }
                
                // Check password strength
                if (newPassword.length < 8) {
                    showAlert('Password must be at least 8 characters long!', 'error');
                    return;
                }
                
                showAlert('Password changed successfully!', 'success');
                document.getElementById('passwordForm').reset();
                document.getElementById('passwordStrength').className = 'strength-bar';
                document.getElementById('passwordMatchMessage').style.display = 'none';
            }

            // Change Theme
            function changeTheme(theme) {
                switch(theme) {
                    case 'dark':
                        document.body.style.backgroundColor = '#1a1a1a';
                        document.body.style.color = '#ffffff';
                        break;
                    case 'light':
                        document.body.style.backgroundColor = '#ffffff';
                        document.body.style.color = '#333333';
                        break;
                    default:
                        document.body.style.backgroundColor = '#f5f5f5';
                        document.body.style.color = '#333333';
                        break;
                }
                showAlert(`Theme changed to ${theme} mode`, 'info');
            }

            // Export Data
            function exportData() {
                const data = {
                    products: products,
                    complaints: complaints,
                    materials: materials,
                    designIdeas: designIdeas,
                    dashboardData: dashboardData
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'kallakriti-data-backup.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showAlert('Data exported successfully!', 'success');
            }

            // Reset Data
            function resetData() {
                if (confirm('Are you sure you want to reset all data? This cannot be undone!')) {
                    products = [];
                    complaints = [];
                    materials = [];
                    designIdeas = [];
                    dashboardData = {
                        totalProducts: 0,
                        totalComplaints: 0,
                        materialStock: 0,
                        customOrders: 0,
                        lowStockCount: 0,
                        yarnCount: 0,
                        accessoryCount: 0,
                        totalMaterials: 0
                    };
                    
                    loadProducts();
                    loadComplaints();
                    loadMaterials();
                    loadDesignIdeas();
                    updateStats();
                    
                    showAlert('All data has been reset!', 'success');
                }
            }

            // Business Tools Functions
            function openPricingCalculator() {
                alert('Pricing Calculator:\n\nThis feature calculates product pricing based on:\nâ€¢ Material cost\nâ€¢ Time required\nâ€¢ Complexity\nâ€¢ Overhead costs\n\nComing soon!');
            }

            function viewOrderTimeline() {
                alert('Order Timeline:\n\nTrack all custom orders with deadlines and delivery dates.\n\nComing soon!');
            }

            function viewSalesAnalytics() {
                alert('Sales Analytics:\n\nView product popularity, sales trends, and revenue reports.\n\nComing soon!');
            }

            function backupData() {
                exportData();
            }

            function checkReorderList() {
                const lowStockMaterials = materials.filter(m => m.stock <= 20);
                if (lowStockMaterials.length === 0) {
                    alert('No items need reordering!');
                    return;
                }
                
                let message = 'Items to reorder:\n\n';
                lowStockMaterials.forEach(m => {
                    message += `â€¢ ${m.name}: ${m.stock} ${m.unit} (Min: 20)\n`;
                });
                
                alert(message);
            }

            function exportMaterialsList() {
                let csvContent = "data:text/csv;charset=utf-8,";
                csvContent += "Name,Type,Color,Stock,Unit,Notes\n";
                
                materials.forEach(m => {
                    csvContent += `"${m.name}","${m.type}","${m.color}",${m.stock},"${m.unit}","${m.notes}"\n`;
                });
                
                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "materials_inventory.csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showAlert('Materials list exported as CSV!', 'success');
            }

            // Logout
            function logout() {
                if (confirm('Are you sure you want to logout?')) {
                    showAlert('Logging out...', 'info');
                    // In a real app, you would redirect to login page
                    // window.location.href = 'login.html';
                    setTimeout(() => {
                        alert('You have been logged out. In a real app, you would be redirected to login page.');
                    }, 1000);
                }
            }

            // Show Alert
            function showAlert(message, type = 'info') {
                const alertContainer = document.getElementById('alertContainer');
                const alertDiv = document.createElement('div');
                
                alertDiv.className = `alert alert-${type === 'error' ? 'error' : 'success'}`;
                alertDiv.innerHTML = `
                    <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'}"></i>
                    <span>${message}</span>
                `;
                
                alertContainer.appendChild(alertDiv);
                
                // Remove alert after 3 seconds
                setTimeout(() => {
                    alertDiv.remove();
                }, 3000);
            }

            // Additional Utility Functions
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            function formatDate(date) {
                return new Date(date).toLocaleDateString('en-IN', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric'
                });
            }

            function formatCurrency(amount) {
                return new Intl.NumberFormat('en-IN', {
                    style: 'currency',
                    currency: 'INR'
                }).format(amount);
            }
        </script>
    </body>
</html>
